<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curriinsta - Consigue tu curri insta y comparte con tus amigos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.3s ease-out;
        }
        .section-content {
            display: none;
        }
        .section-content.active {
            display: block;
        }
    </style>
</head>
<body class="bg-white min-h-screen">
    
    <!-- Header -->
    <div class="bg-white border-b-2 border-gray-200 sticky top-0 z-10 shadow-sm">
        <div class="max-w-6xl mx-auto px-6 py-5 flex justify-between items-center flex-wrap gap-4">
            <div>
                <h1 class="text-3xl font-black text-gray-900 tracking-tight">
                    Curri<span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500">insta</span>
                </h1>
                <p class="text-gray-600 text-sm mt-1">Consigue tu curri insta y comparte con tus amigos</p>
            </div>
            <button onclick="generarPDF()" class="bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:shadow-xl transition-all shadow-lg hover:scale-105">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                Descargar PDF
            </button>
        </div>
    </div>

    <div class="max-w-6xl mx-auto px-6 py-8">
        <!-- Navigation Tabs -->
        <div class="flex gap-3 mb-8 overflow-x-auto pb-2">
            <button onclick="cambiarSeccion('personal')" id="tab-personal" class="tab-button px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap bg-purple-600 text-white shadow-md">
                Personal
            </button>
            <button onclick="cambiarSeccion('experience')" id="tab-experience" class="tab-button px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap bg-gray-100 text-gray-700 hover:bg-gray-200">
                Experiencia
            </button>
            <button onclick="cambiarSeccion('education')" id="tab-education" class="tab-button px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap bg-gray-100 text-gray-700 hover:bg-gray-200">
                Educaci√≥n
            </button>
            <button onclick="cambiarSeccion('skills')" id="tab-skills" class="tab-button px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap bg-gray-100 text-gray-700 hover:bg-gray-200">
                Habilidades
            </button>
            <button onclick="cambiarSeccion('styles')" id="tab-styles" class="tab-button px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap bg-gray-100 text-gray-700 hover:bg-gray-200">
                üé® Estilos
            </button>
        </div>

        <!-- Form Container -->
        <div class="bg-white border-2 border-gray-200 rounded-2xl p-8 shadow-sm">
            
            <!-- Personal Info Section -->
            <div id="section-personal" class="section-content active animate-fadeIn">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Informaci√≥n Personal</h2>
                <div class="space-y-6">
                    <!-- Foto de perfil -->
                    <div class="flex items-center gap-6 p-6 bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-2xl">
                        <div class="flex-shrink-0">
                            <div id="photo-preview" class="w-32 h-32 rounded-full bg-gray-200 border-4 border-white shadow-lg flex items-center justify-center overflow-hidden">
                                <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-lg font-bold text-gray-900 mb-2">üì∏ Foto de Perfil</h3>
                            <p class="text-gray-600 text-sm mb-3">A√±ade una foto profesional (opcional)</p>
                            <input type="file" id="photoInput" accept="image/*" class="hidden">
                            <button onclick="document.getElementById('photoInput').click()" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg font-semibold hover:shadow-lg transition-all">
                                Subir Foto
                            </button>
                            <button onclick="eliminarFoto()" class="ml-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 transition-all">
                                Eliminar
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 font-semibold mb-2">Nombre Completo *</label>
                            <input type="text" id="fullName" placeholder="Mar√≠a Garc√≠a L√≥pez" class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-semibold mb-2">Email *</label>
                            <input type="email" id="email" placeholder="maria@email.com" class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:border-pink-500 focus:ring-4 focus:ring-pink-100 outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-semibold mb-2">Tel√©fono</label>
                            <input type="tel" id="phone" placeholder="+34 600 000 000" class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-semibold mb-2">Ubicaci√≥n</label>
                            <input type="text" id="location" placeholder="Madrid, Espa√±a" class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:border-green-500 focus:ring-4 focus:ring-green-100 outline-none transition-all">
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Resumen Profesional</label>
                        <textarea id="summary" rows="4" placeholder="Cu√©ntanos sobre ti y tu experiencia profesional..." class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:border-orange-500 focus:ring-4 focus:ring-orange-100 outline-none transition-all resize-none"></textarea>
                    </div>
                </div>
            </div>

            <!-- Experience Section -->
            <div id="section-experience" class="section-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Experiencia Profesional</h2>
                    <button onclick="agregarExperiencia()" class="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-5 py-2 rounded-xl font-bold hover:shadow-lg transition-all">
                        + A√±adir
                    </button>
                </div>
                <div id="experience-container" class="space-y-4"></div>
            </div>

            <!-- Education Section -->
            <div id="section-education" class="section-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Educaci√≥n</h2>
                    <button onclick="agregarEducacion()" class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-5 py-2 rounded-xl font-bold hover:shadow-lg transition-all">
                        + A√±adir
                    </button>
                </div>
                <div id="education-container" class="space-y-4"></div>
            </div>

            <!-- Skills Section -->
            <div id="section-skills" class="section-content">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Habilidades e Idiomas</h2>
                
                <div class="bg-orange-50 border-2 border-orange-200 rounded-2xl p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-orange-900">üí™ Habilidades</h3>
                        <button onclick="agregarHabilidad()" class="bg-orange-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-orange-700 transition-all">+ A√±adir</button>
                    </div>
                    <div id="skills-container" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>
                </div>

                <div class="bg-purple-50 border-2 border-purple-200 rounded-2xl p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-purple-900">üåç Idiomas</h3>
                        <button onclick="agregarIdioma()" class="bg-purple-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-purple-700 transition-all">+ A√±adir</button>
                    </div>
                    <div id="languages-container" class="space-y-3"></div>
                </div>
            </div>

            <!-- Styles Section -->
            <div id="section-styles" class="section-content">
                <h2 class="text-2xl font-bold text-gray-900 mb-3">Elige tu Estilo</h2>
                <p class="text-gray-600 mb-8">Cada dise√±o tiene su propia personalidad. ¬°Elige el que m√°s te represente! üé®</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    
                    <!-- Estilo 1: Minimalista Blanco -->
                    <div onclick="seleccionarEstilo('minimal')" id="style-minimal" class="style-card cursor-pointer bg-white border-4 border-purple-600 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Minimal</h3>
                            <div class="w-6 h-6 rounded-full bg-purple-600 flex items-center justify-center">
                                <div class="w-3 h-3 rounded-full bg-white"></div>
                            </div>
                        </div>
                        <div class="space-y-2 mb-4 bg-gray-50 p-4 rounded-xl">
                            <div class="h-3 bg-gray-900 rounded w-3/4"></div>
                            <div class="h-2 bg-gray-400 rounded w-1/2"></div>
                            <div class="h-px bg-gray-300 my-2"></div>
                            <div class="h-2 bg-gray-600 rounded"></div>
                        </div>
                        <p class="text-gray-600 text-sm">Limpio y profesional</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-gray-900"></div>
                            <div class="w-6 h-6 rounded bg-gray-400"></div>
                            <div class="w-6 h-6 rounded bg-white border-2 border-gray-200"></div>
                        </div>
                    </div>

                    <!-- Estilo 2: Dos Columnas Azul -->
                    <div onclick="seleccionarEstilo('sidebar')" id="style-sidebar" class="style-card cursor-pointer bg-white border-4 border-gray-200 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg hover:border-blue-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Sidebar</h3>
                            <div class="w-6 h-6 rounded-full border-4 border-gray-200"></div>
                        </div>
                        <div class="mb-4">
                            <div class="h-6 bg-blue-600 rounded-lg mb-2"></div>
                            <div class="grid grid-cols-4 gap-2">
                                <div class="col-span-1 bg-blue-100 rounded-lg h-16"></div>
                                <div class="col-span-3 space-y-1">
                                    <div class="h-2 bg-gray-300 rounded"></div>
                                    <div class="h-2 bg-gray-300 rounded"></div>
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">Lateral con habilidades</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-blue-600"></div>
                            <div class="w-6 h-6 rounded bg-blue-100"></div>
                        </div>
                    </div>

                    <!-- Estilo 3: Gradiente Vibrante -->
                    <div onclick="seleccionarEstilo('gradient')" id="style-gradient" class="style-card cursor-pointer bg-white border-4 border-gray-200 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg hover:border-pink-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Gradient</h3>
                            <div class="w-6 h-6 rounded-full border-4 border-gray-200"></div>
                        </div>
                        <div class="space-y-2 mb-4">
                            <div class="h-8 bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 rounded-lg"></div>
                            <div class="h-2 bg-gray-300 rounded w-3/4"></div>
                            <div class="h-2 bg-pink-400 rounded w-1/4"></div>
                        </div>
                        <p class="text-gray-600 text-sm">Colorido y moderno</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-purple-600"></div>
                            <div class="w-6 h-6 rounded bg-pink-600"></div>
                            <div class="w-6 h-6 rounded bg-orange-500"></div>
                        </div>
                    </div>

                    <!-- Estilo 4: Verde Tech -->
                    <div onclick="seleccionarEstilo('tech')" id="style-tech" class="style-card cursor-pointer bg-white border-4 border-gray-200 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg hover:border-green-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Tech</h3>
                            <div class="w-6 h-6 rounded-full border-4 border-gray-200"></div>
                        </div>
                        <div class="space-y-2 mb-4 bg-gray-900 p-4 rounded-xl">
                            <div class="h-3 bg-green-400 rounded w-2/3"></div>
                            <div class="h-2 bg-gray-600 rounded w-1/2"></div>
                            <div class="h-2 bg-cyan-400 rounded w-1/4"></div>
                        </div>
                        <p class="text-gray-600 text-sm">Estilo desarrollador</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-green-500"></div>
                            <div class="w-6 h-6 rounded bg-cyan-500"></div>
                            <div class="w-6 h-6 rounded bg-gray-900"></div>
                        </div>
                    </div>

                    <!-- Estilo 5: Coral Creativo -->
                    <div onclick="seleccionarEstilo('coral')" id="style-coral" class="style-card cursor-pointer bg-white border-4 border-gray-200 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg hover:border-orange-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Coral</h3>
                            <div class="w-6 h-6 rounded-full border-4 border-gray-200"></div>
                        </div>
                        <div class="space-y-2 mb-4">
                            <div class="h-8 bg-gradient-to-r from-orange-400 to-pink-500 rounded-lg"></div>
                            <div class="flex gap-2">
                                <div class="w-2 h-8 bg-orange-400 rounded"></div>
                                <div class="flex-1 space-y-1">
                                    <div class="h-2 bg-gray-300 rounded"></div>
                                    <div class="h-2 bg-gray-300 rounded"></div>
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">C√°lido y acogedor</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-orange-400"></div>
                            <div class="w-6 h-6 rounded bg-pink-500"></div>
                            <div class="w-6 h-6 rounded bg-yellow-300"></div>
                        </div>
                    </div>

                    <!-- Estilo 6: Elegante Azul Oscuro -->
                    <div onclick="seleccionarEstilo('elegant')" id="style-elegant" class="style-card cursor-pointer bg-white border-4 border-gray-200 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg hover:border-indigo-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Elegant</h3>
                            <div class="w-6 h-6 rounded-full border-4 border-gray-200"></div>
                        </div>
                        <div class="space-y-2 mb-4">
                            <div class="h-8 bg-indigo-900 rounded-lg"></div>
                            <div class="h-2 bg-amber-400 rounded w-1/4"></div>
                            <div class="h-2 bg-gray-300 rounded"></div>
                        </div>
                        <p class="text-gray-600 text-sm">Sofisticado con dorado</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-indigo-900"></div>
                            <div class="w-6 h-6 rounded bg-amber-400"></div>
                            <div class="w-6 h-6 rounded bg-gray-700"></div>
                        </div>
                    </div>

                    <!-- Estilo 7: Timeline -->
                    <div onclick="seleccionarEstilo('timeline')" id="style-timeline" class="style-card cursor-pointer bg-white border-4 border-gray-200 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg hover:border-sky-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Timeline</h3>
                            <div class="w-6 h-6 rounded-full border-4 border-gray-200"></div>
                        </div>
                        <div class="mb-4 relative pl-6">
                            <div class="absolute left-0 top-0 w-1 h-full bg-sky-500 rounded"></div>
                            <div class="space-y-3">
                                <div class="flex items-start gap-2">
                                    <div class="w-3 h-3 rounded-full bg-sky-500 mt-1"></div>
                                    <div class="flex-1 space-y-1">
                                        <div class="h-2 bg-gray-300 rounded"></div>
                                        <div class="h-1 bg-gray-200 rounded w-2/3"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">L√≠nea de tiempo visual</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-sky-500"></div>
                            <div class="w-6 h-6 rounded bg-sky-200"></div>
                        </div>
                    </div>

                    <!-- Estilo 8: Dos Columnas Derecha -->
                    <div onclick="seleccionarEstilo('rightbar')" id="style-rightbar" class="style-card cursor-pointer bg-white border-4 border-gray-200 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg hover:border-rose-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Right Bar</h3>
                            <div class="w-6 h-6 rounded-full border-4 border-gray-200"></div>
                        </div>
                        <div class="mb-4">
                            <div class="h-6 bg-rose-600 rounded-lg mb-2"></div>
                            <div class="grid grid-cols-4 gap-2">
                                <div class="col-span-3 space-y-1">
                                    <div class="h-2 bg-gray-300 rounded"></div>
                                    <div class="h-2 bg-gray-300 rounded"></div>
                                </div>
                                <div class="col-span-1 bg-rose-100 rounded-lg h-16"></div>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">Sidebar a la derecha</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-rose-600"></div>
                            <div class="w-6 h-6 rounded bg-rose-200"></div>
                        </div>
                    </div>

                    <!-- Estilo 9: Bloques de Color -->
                    <div onclick="seleccionarEstilo('blocks')" id="style-blocks" class="style-card cursor-pointer bg-white border-4 border-gray-200 rounded-2xl p-6 hover:scale-105 transition-all shadow-lg hover:border-teal-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Blocks</h3>
                            <div class="w-6 h-6 rounded-full border-4 border-gray-200"></div>
                        </div>
                        <div class="mb-4">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div class="h-6 bg-teal-500 rounded"></div>
                                <div class="h-6 bg-yellow-400 rounded"></div>
                            </div>
                            <div class="space-y-1">
                                <div class="h-2 bg-gray-300 rounded"></div>
                                <div class="h-4 bg-purple-500 rounded w-1/3"></div>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">Secciones con bloques</p>
                        <div class="flex gap-2 mt-3">
                            <div class="w-6 h-6 rounded bg-teal-500"></div>
                            <div class="w-6 h-6 rounded bg-yellow-400"></div>
                            <div class="w-6 h-6 rounded bg-purple-500"></div>
                        </div>
                    </div>

                </div>

                <div class="mt-8 p-6 bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-2xl">
                    <p class="text-gray-700 text-center">
                        üí° <strong class="text-purple-900">Tip:</strong> El estilo que elijas se reflejar√° en tu PDF descargado. ¬°Experimenta hasta encontrar tu favorito!
                    </p>
                </div>
            </div>

        </div>

        <!-- Footer -->
        <div class="mt-8 text-center text-gray-500 text-sm">
            <p class="font-semibold">‚ú® Crea tu curri en segundos</p>
            <p class="mt-2">100% gratis ‚Ä¢ Sin registro ‚Ä¢ Ilimitado</p>
        </div>
    </div>

    <script>
        let experienceCount = 0;
        let educationCount = 0;
        let skillCount = 0;
        let languageCount = 0;
        let selectedStyle = 'minimal';
        let photoDataURL = null;

        // Funci√≥n para recortar imagen al centro (crop real, no compresi√≥n)
        function cropImageCenter(imageDataURL, targetWidth, targetHeight) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    canvas.width = targetWidth;
                    canvas.height = targetHeight;
                    
                    // Calcular dimensiones para crop centrado
                    const imgAspect = img.width / img.height;
                    const targetAspect = targetWidth / targetHeight;
                    
                    let sourceX, sourceY, sourceWidth, sourceHeight;
                    
                    if (imgAspect > targetAspect) {
                        // Imagen m√°s ancha - recortar los lados
                        sourceHeight = img.height;
                        sourceWidth = img.height * targetAspect;
                        sourceX = (img.width - sourceWidth) / 2;
                        sourceY = 0;
                    } else {
                        // Imagen m√°s alta - recortar arriba/abajo
                        sourceWidth = img.width;
                        sourceHeight = img.width / targetAspect;
                        sourceX = 0;
                        sourceY = (img.height - sourceHeight) / 2;
                    }
                    
                    // Dibujar la imagen recortada
                    ctx.drawImage(img, sourceX, sourceY, sourceWidth, sourceHeight, 0, 0, targetWidth, targetHeight);
                    
                    resolve(canvas.toDataURL('image/jpeg', 0.9));
                };
                img.src = imageDataURL;
            });
        }

        window.onload = function() {
            agregarExperiencia();
            agregarEducacion();
            agregarHabilidad();
            agregarIdioma();
            
            // Manejo de foto
            document.getElementById('photoInput').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        photoDataURL = event.target.result;
                        const preview = document.getElementById('photo-preview');
                        preview.innerHTML = `<img src="${photoDataURL}" class="w-full h-full object-cover">`;
                    };
                    reader.readAsDataURL(file);
                }
            });
        };

        function eliminarFoto() {
            photoDataURL = null;
            const preview = document.getElementById('photo-preview');
            preview.innerHTML = `<svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>`;
        }

        function cambiarSeccion(seccion) {
            document.querySelectorAll('.section-content').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(t => {
                t.classList.remove('bg-purple-600', 'text-white', 'shadow-md');
                t.classList.add('bg-gray-100', 'text-gray-700');
            });
            
            document.getElementById('section-' + seccion).classList.add('active');
            const tab = document.getElementById('tab-' + seccion);
            tab.classList.remove('bg-gray-100', 'text-gray-700');
            tab.classList.add('bg-purple-600', 'text-white', 'shadow-md');
        }

        function seleccionarEstilo(estilo) {
            selectedStyle = estilo;
            
            document.querySelectorAll('.style-card').forEach(card => {
                const border = card.id === 'style-' + estilo ? 4 : 4;
                card.className = card.className.replace(/border-\w+-\d+/g, 'border-gray-200');
                if (card.id === 'style-' + estilo) {
                    const colors = {
                        minimal: 'purple', sidebar: 'blue', gradient: 'pink',
                        tech: 'green', coral: 'orange', elegant: 'indigo',
                        timeline: 'sky', rightbar: 'rose', blocks: 'teal'
                    };
                    card.className = card.className.replace('border-gray-200', `border-${colors[estilo]}-600`);
                }
                const circle = card.querySelector('div > div:last-child');
                if (card.id === 'style-' + estilo) {
                    circle.className = `w-6 h-6 rounded-full bg-${colors[estilo]}-600 flex items-center justify-center`;
                    circle.innerHTML = '<div class="w-3 h-3 rounded-full bg-white"></div>';
                } else {
                    circle.className = 'w-6 h-6 rounded-full border-4 border-gray-200';
                    circle.innerHTML = '';
                }
            });
        }

        function agregarExperiencia() {
            const id = experienceCount++;
            const div = document.createElement('div');
            div.id = `exp-${id}`;
            div.className = 'bg-blue-50 border-2 border-blue-200 rounded-2xl p-6 relative';
            div.innerHTML = `
                <button onclick="eliminar('exp-${id}')" class="absolute top-4 right-4 text-red-500 hover:text-red-700 font-bold text-2xl">√ó</button>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div><label class="block text-gray-700 font-semibold mb-2">Puesto</label>
                        <input type="text" class="exp-pos w-full px-4 py-2 bg-white border-2 border-blue-200 rounded-xl text-gray-900 focus:border-blue-500 outline-none" placeholder="Desarrollador Web"></div>
                    <div><label class="block text-gray-700 font-semibold mb-2">Empresa</label>
                        <input type="text" class="exp-comp w-full px-4 py-2 bg-white border-2 border-blue-200 rounded-xl text-gray-900 focus:border-blue-500 outline-none" placeholder="Tech Startup"></div>
                </div>
                <div class="mb-4"><label class="block text-gray-700 font-semibold mb-2">Per√≠odo</label>
                    <input type="text" class="exp-per w-full px-4 py-2 bg-white border-2 border-blue-200 rounded-xl text-gray-900 focus:border-blue-500 outline-none" placeholder="2020 - 2024"></div>
                <div><label class="block text-gray-700 font-semibold mb-2">Descripci√≥n</label>
                    <textarea rows="3" class="exp-desc w-full px-4 py-2 bg-white border-2 border-blue-200 rounded-xl text-gray-900 focus:border-blue-500 outline-none resize-none" placeholder="Tus logros y responsabilidades..."></textarea></div>
            `;
            document.getElementById('experience-container').appendChild(div);
        }

        function agregarEducacion() {
            const id = educationCount++;
            const div = document.createElement('div');
            div.id = `edu-${id}`;
            div.className = 'bg-green-50 border-2 border-green-200 rounded-2xl p-6 relative';
            div.innerHTML = `
                <button onclick="eliminar('edu-${id}')" class="absolute top-4 right-4 text-red-500 hover:text-red-700 font-bold text-2xl">√ó</button>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div><label class="block text-gray-700 font-semibold mb-2">T√≠tulo</label>
                        <input type="text" class="edu-deg w-full px-4 py-2 bg-white border-2 border-green-200 rounded-xl text-gray-900 focus:border-green-500 outline-none" placeholder="Grado en..."></div>
                    <div><label class="block text-gray-700 font-semibold mb-2">Instituci√≥n</label>
                        <input type="text" class="edu-inst w-full px-4 py-2 bg-white border-2 border-green-200 rounded-xl text-gray-900 focus:border-green-500 outline-none" placeholder="Universidad"></div>
                </div>
                <div class="mb-4"><label class="block text-gray-700 font-semibold mb-2">A√±o</label>
                    <input type="text" class="edu-year w-full px-4 py-2 bg-white border-2 border-green-200 rounded-xl text-gray-900 focus:border-green-500 outline-none" placeholder="2016-2020"></div>
                <div><label class="block text-gray-700 font-semibold mb-2">Detalles</label>
                    <textarea rows="2" class="edu-det w-full px-4 py-2 bg-white border-2 border-green-200 rounded-xl text-gray-900 focus:border-green-500 outline-none resize-none" placeholder="Especializaci√≥n, honores..."></textarea></div>
            `;
            document.getElementById('education-container').appendChild(div);
        }

        function agregarHabilidad() {
            const id = skillCount++;
            const div = document.createElement('div');
            div.id = `skill-${id}`;
            div.className = 'flex gap-2';
            div.innerHTML = `
                <input type="text" class="skill flex-1 px-4 py-2 bg-white border-2 border-orange-200 rounded-xl text-gray-900 focus:border-orange-500 outline-none" placeholder="JavaScript">
                <button onclick="eliminar('skill-${id}')" class="text-red-500 hover:text-red-700 px-3 font-bold text-xl">√ó</button>
            `;
            document.getElementById('skills-container').appendChild(div);
        }

        function agregarIdioma() {
            const id = languageCount++;
            const div = document.createElement('div');
            div.id = `lang-${id}`;
            div.className = 'flex gap-3';
            div.innerHTML = `
                <input type="text" class="lang-name flex-1 px-4 py-2 bg-white border-2 border-purple-200 rounded-xl text-gray-900 focus:border-purple-500 outline-none" placeholder="Espa√±ol">
                <select class="lang-lvl px-4 py-2 bg-white border-2 border-purple-200 rounded-xl text-gray-900 focus:border-purple-500 outline-none">
                    <option value="">Nivel</option>
                    <option value="B√°sico">B√°sico</option>
                    <option value="Intermedio">Intermedio</option>
                    <option value="Avanzado">Avanzado</option>
                    <option value="Nativo">Nativo</option>
                </select>
                <button onclick="eliminar('lang-${id}')" class="text-red-500 hover:text-red-700 px-3 font-bold text-xl">√ó</button>
            `;
            document.getElementById('languages-container').appendChild(div);
        }

        function eliminar(id) {
            document.getElementById(id)?.remove();
        }

        async function generarPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Pre-procesar fotos recortadas para cada estilo
            let photoRect = null;  // Para estilos con foto rectangular (25x32mm)
            let photoSquare = null; // Para estilos con foto cuadrada (40x40mm)
            
            if (photoDataURL) {
                // Crear versiones recortadas de la foto
                photoRect = await cropImageCenter(photoDataURL, 300, 384); // Proporci√≥n 25:32
                photoSquare = await cropImageCenter(photoDataURL, 400, 400); // Cuadrada
            }
            
            const data = {
                photoRect: photoRect,
                photoSquare: photoSquare,
                personalInfo: {
                    fullName: document.getElementById('fullName').value || 'Tu Nombre',
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    location: document.getElementById('location').value,
                    summary: document.getElementById('summary').value
                },
                experiences: [],
                education: [],
                skills: [],
                languages: []
            };
            
            document.querySelectorAll('[id^="exp-"]').forEach(exp => {
                const pos = exp.querySelector('.exp-pos').value;
                const comp = exp.querySelector('.exp-comp').value;
                if (pos || comp) {
                    data.experiences.push({
                        position: pos, company: comp,
                        period: exp.querySelector('.exp-per').value,
                        description: exp.querySelector('.exp-desc').value
                    });
                }
            });
            
            document.querySelectorAll('[id^="edu-"]').forEach(edu => {
                const deg = edu.querySelector('.edu-deg').value;
                const inst = edu.querySelector('.edu-inst').value;
                if (deg || inst) {
                    data.education.push({
                        degree: deg, 
                        institution: inst,
                        year: edu.querySelector('.edu-year').value,
                        details: edu.querySelector('.edu-det').value
                    });
                }
            });
            
            document.querySelectorAll('.skill').forEach(s => {
                if (s.value) data.skills.push(s.value);
            });
            
            document.querySelectorAll('[id^="lang-"]').forEach(l => {
                const name = l.querySelector('.lang-name').value;
                if (name) {
                    data.languages.push({
                        language: name,
                        level: l.querySelector('.lang-lvl').value
                    });
                }
            });
            
            // Generar seg√∫n estilo
            const styles = {
                minimal: () => genMinimal(doc, data),
                sidebar: () => genSidebar(doc, data),
                gradient: () => genGradient(doc, data),
                tech: () => genTech(doc, data),
                coral: () => genCoral(doc, data),
                elegant: () => genElegant(doc, data),
                timeline: () => genTimeline(doc, data),
                rightbar: () => genRightBar(doc, data),
                blocks: () => genBlocks(doc, data)
            };
            
            (styles[selectedStyle] || styles.minimal)();
            doc.save('curri.pdf');
        }

        // Funci√≥n auxiliar para a√±adir secciones
        function addSection(doc, title, items, y, m, pw, ph, color, renderItem) {
            if (!items || items.length === 0) return y;
            if (y > ph - 40) { doc.addPage(); y = 20; }
            
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(...color);
            doc.text(title, m, y);
            y += 10;
            
            items.forEach(item => {
                if (y > ph - 50) { doc.addPage(); y = 20; }
                y = renderItem(doc, item, y, m, pw);
            });
            
            return y + 8;
        }

        // Funci√≥n para a√±adir foto rectangular (ya recortada)
        function addPhotoRect(doc, photo, x, y, w, h, borderColor = [200, 200, 200]) {
            if (photo) {
                doc.addImage(photo, 'JPEG', x, y, w, h);
                doc.setDrawColor(...borderColor);
                doc.setLineWidth(0.5);
                doc.rect(x, y, w, h);
            }
        }

        // Funci√≥n para a√±adir foto cuadrada (ya recortada)
        function addPhotoSquare(doc, photo, x, y, size, borderColor = [255, 255, 255], borderWidth = 2) {
            if (photo) {
                doc.addImage(photo, 'JPEG', x, y, size, size);
                doc.setDrawColor(...borderColor);
                doc.setLineWidth(borderWidth);
                doc.rect(x, y, size, size);
            }
        }

        function genMinimal(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const m = 25;
            let y = 25;
            
            // Foto de perfil rectangular vertical (ya recortada)
            if (d.photoRect) {
                addPhotoRect(doc, d.photoRect, pw - m - 25, 20, 25, 32, [200, 200, 200]);
            }
            
            // Nombre minimalista
            doc.setFontSize(32);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(20, 20, 20);
            doc.text(d.personalInfo.fullName, m, y);
            y += 8;
            
            // L√≠nea sutil
            doc.setDrawColor(200, 200, 200);
            doc.setLineWidth(0.5);
            const lineEnd = d.photoRect ? pw - m - 30 : pw - m;
            doc.line(m, y, lineEnd, y);
            y += 8;
            
            // Contacto minimalista
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(100, 100, 100);
            const contact = [d.personalInfo.email, d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join('  ‚Ä¢  ');
            doc.text(contact, m, y);
            y += 12;
            
            // Resumen
            if (d.personalInfo.summary) {
                const maxWidth = d.photoRect ? pw - 2*m - 30 : pw - 2*m;
                doc.setFontSize(10);
                doc.setTextColor(60, 60, 60);
                const lines = doc.splitTextToSize(d.personalInfo.summary, maxWidth);
                doc.text(lines, m, y);
                y += lines.length * 5 + 12;
            }
            
            // Experiencia
            y = addSection(doc, 'EXPERIENCIA', d.experiences, y, m, pw, ph, [20, 20, 20], (doc, exp, y, m, pw) => {
                doc.setFontSize(11);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(20, 20, 20);
                doc.text(exp.position || 'Puesto', m, y);
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(9);
                doc.setTextColor(120, 120, 120);
                doc.text(`${exp.company || ''} | ${exp.period || ''}`, m, y + 5);
                y += 10;
                if (exp.description) {
                    doc.setFontSize(9);
                    doc.setTextColor(80, 80, 80);
                    const lines = doc.splitTextToSize(exp.description, pw - 2*m);
                    doc.text(lines, m, y);
                    y += lines.length * 4 + 5;
                }
                return y;
            });
            
            // Educaci√≥n con detalles
            y = addSection(doc, 'EDUCACI√ìN', d.education, y, m, pw, ph, [20, 20, 20], (doc, edu, y, m, pw) => {
                doc.setFontSize(11);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(20, 20, 20);
                doc.text(edu.degree || 'T√≠tulo', m, y);
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(9);
                doc.setTextColor(120, 120, 120);
                doc.text(`${edu.institution || ''} | ${edu.year || ''}`, m, y + 5);
                y += 10;
                if (edu.details) {
                    doc.setFontSize(9);
                    doc.setTextColor(80, 80, 80);
                    const lines = doc.splitTextToSize(edu.details, pw - 2*m);
                    doc.text(lines, m, y);
                    y += lines.length * 4 + 5;
                }
                return y;
            });
            
            // Habilidades
            if (d.skills.length > 0) {
                if (y > ph - 30) { doc.addPage(); y = 20; }
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(20, 20, 20);
                doc.text('HABILIDADES', m, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(80, 80, 80);
                const skills = d.skills.join('  ‚Ä¢  ');
                const lines = doc.splitTextToSize(skills, pw - 2*m);
                doc.text(lines, m, y);
                y += lines.length * 4 + 10;
            }
            
            // Idiomas
            if (d.languages.length > 0 && y < ph - 25) {
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(20, 20, 20);
                doc.text('IDIOMAS', m, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(80, 80, 80);
                d.languages.forEach(lang => {
                    doc.text(`${lang.language}: ${lang.level || '‚Äî'}`, m, y);
                    y += 5;
                });
            }
        }

        function genSidebar(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const sw = 65;
            const m = sw + 12;
            
            // Sidebar azul
            doc.setFillColor(37, 99, 235);
            doc.rect(0, 0, sw, ph, 'F');
            
            // Foto cuadrada en el sidebar (ya recortada)
            let sidebarContentStart = 55;
            if (d.photoSquare) {
                const photoSize = 40;
                const photoX = (sw - photoSize) / 2;
                const photoY = 15;
                addPhotoSquare(doc, d.photoSquare, photoX, photoY, photoSize, [255, 255, 255], 2);
                sidebarContentStart = photoY + photoSize + 15;
            }
            
            // Header
            doc.setFillColor(37, 99, 235);
            doc.rect(sw, 0, pw - sw, 45, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(24);
            doc.setFont('helvetica', 'bold');
            doc.text(d.personalInfo.fullName, m, 22);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.text(d.personalInfo.email || '', m, 31);
            doc.text([d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join(' | '), m, 38);
            
            // Sidebar - Habilidades
            let sy = sidebarContentStart;
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(11);
            doc.setFont('helvetica', 'bold');
            doc.text('HABILIDADES', 8, sy);
            sy += 9;
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            d.skills.forEach(skill => {
                if (sy > ph - 20) return;
                const lines = doc.splitTextToSize(skill, sw - 16);
                doc.text(lines, 8, sy);
                sy += lines.length * 4 + 3;
            });
            
            // Sidebar - Idiomas
            sy += 8;
            if (sy < ph - 40) {
                doc.setFontSize(11);
                doc.setFont('helvetica', 'bold');
                doc.text('IDIOMAS', 8, sy);
                sy += 9;
                doc.setFontSize(8);
                doc.setFont('helvetica', 'normal');
                d.languages.forEach(lang => {
                    if (sy > ph - 10) return;
                    doc.text(lang.language, 8, sy);
                    doc.setFontSize(7);
                    doc.text(lang.level || '‚Äî', 8, sy + 3);
                    sy += 10;
                    doc.setFontSize(8);
                });
            }
            
            // Contenido principal
            let my = 55;
            doc.setTextColor(0, 0, 0);
            
            if (d.personalInfo.summary) {
                doc.setFontSize(10);
                doc.setTextColor(60, 60, 60);
                const lines = doc.splitTextToSize(d.personalInfo.summary, pw - m - 12);
                doc.text(lines, m, my);
                my += lines.length * 5 + 12;
            }
            
            // Experiencia
            my = addSection(doc, 'EXPERIENCIA', d.experiences, my, m, pw, ph, [37, 99, 235], (doc, exp, y, m, pw) => {
                doc.setFontSize(10);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(0, 0, 0);
                doc.text(exp.position || 'Puesto', m, y);
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(9);
                doc.setTextColor(100, 100, 100);
                doc.text(`${exp.company || ''} | ${exp.period || ''}`, m, y + 5);
                y += 11;
                if (exp.description) {
                    doc.setFontSize(8);
                    doc.setTextColor(80, 80, 80);
                    const lines = doc.splitTextToSize(exp.description, pw - m - 12);
                    doc.text(lines, m, y);
                    y += lines.length * 3 + 4;
                }
                return y;
            });
            
            // Educaci√≥n con detalles
            addSection(doc, 'EDUCACI√ìN', d.education, my, m, pw, ph, [37, 99, 235], (doc, edu, y, m, pw) => {
                doc.setFontSize(10);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(0, 0, 0);
                doc.text(edu.degree || 'T√≠tulo', m, y);
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(9);
                doc.setTextColor(100, 100, 100);
                doc.text(`${edu.institution || ''} | ${edu.year || ''}`, m, y + 5);
                y += 11;
                if (edu.details) {
                    doc.setFontSize(8);
                    doc.setTextColor(80, 80, 80);
                    const lines = doc.splitTextToSize(edu.details, pw - m - 12);
                    doc.text(lines, m, y);
                    y += lines.length * 3 + 4;
                }
                return y;
            });
        }

        function genGradient(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const m = 20;
            let y = 20;
            
            // Header con gradiente simulado (p√∫rpura ‚Üí rosa ‚Üí naranja)
            for (let i = 0; i < 60; i++) {
                const ratio = i / 60;
                let r, g, b;
                if (ratio < 0.5) {
                    const t = ratio * 2;
                    r = 147 + (219 - 147) * t;
                    g = 51 + (39 - 51) * t;
                    b = 234 + (119 - 234) * t;
                } else {
                    const t = (ratio - 0.5) * 2;
                    r = 219 + (249 - 219) * t;
                    g = 39 + (115 - 39) * t;
                    b = 119 + (22 - 119) * t;
                }
                doc.setFillColor(r, g, b);
                doc.rect(0, i, pw, 1, 'F');
            }
            
            // Foto rectangular en header
            if (d.photoRect) {
                addPhotoRect(doc, d.photoRect, pw - m - 25, 15, 25, 32, [255, 255, 255]);
            }
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(28);
            doc.setFont('helvetica', 'bold');
            doc.text(d.personalInfo.fullName, m, 30);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            const contact = [d.personalInfo.email, d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join(' ‚Ä¢ ');
            doc.text(contact, m, 45);
            
            y = 75;
            doc.setTextColor(0, 0, 0);
            
            // Resumen
            if (d.personalInfo.summary) {
                const maxWidth = d.photoRect ? pw - 2*m - 30 : pw - 2*m;
                doc.setFontSize(10);
                doc.setTextColor(60, 60, 60);
                const lines = doc.splitTextToSize(d.personalInfo.summary, maxWidth);
                doc.text(lines, m, y);
                y += lines.length * 5 + 12;
            }
            
            // Experiencia
            y = addSection(doc, 'EXPERIENCIA', d.experiences, y, m, pw, ph, [147, 51, 234], (doc, exp, y, m, pw) => {
                doc.setFontSize(11);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(20, 20, 20);
                doc.text(exp.position || 'Puesto', m, y);
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(9);
                doc.setTextColor(120, 120, 120);
                doc.text(`${exp.company || ''} | ${exp.period || ''}`, m, y + 5);
                y += 10;
                if (exp.description) {
                    doc.setFontSize(9);
                    doc.setTextColor(80, 80, 80);
                    const lines = doc.splitTextToSize(exp.description, pw - 2*m);
                    doc.text(lines, m, y);
                    y += lines.length * 4 + 5;
                }
                return y;
            });
            
            // Educaci√≥n CON DETALLES
            y = addSection(doc, 'EDUCACI√ìN', d.education, y, m, pw, ph, [219, 39, 119], (doc, edu, y, m, pw) => {
                doc.setFontSize(11);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(20, 20, 20);
                doc.text(edu.degree || 'T√≠tulo', m, y);
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(9);
                doc.setTextColor(120, 120, 120);
                doc.text(`${edu.institution || ''} | ${edu.year || ''}`, m, y + 5);
                y += 10;
                if (edu.details) {
                    doc.setFontSize(9);
                    doc.setTextColor(80, 80, 80);
                    const lines = doc.splitTextToSize(edu.details, pw - 2*m);
                    doc.text(lines, m, y);
                    y += lines.length * 4 + 5;
                }
                return y;
            });
            
            // Habilidades
            if (d.skills.length > 0) {
                if (y > ph - 30) { doc.addPage(); y = 20; }
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(249, 115, 22);
                doc.text('HABILIDADES', m, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(80, 80, 80);
                const skills = d.skills.join('  ‚Ä¢  ');
                const lines = doc.splitTextToSize(skills, pw - 2*m);
                doc.text(lines, m, y);
                y += lines.length * 4 + 10;
            }
            
            // Idiomas
            if (d.languages.length > 0 && y < ph - 25) {
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(249, 115, 22);
                doc.text('IDIOMAS', m, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(80, 80, 80);
                d.languages.forEach(lang => {
                    doc.text(`${lang.language}: ${lang.level || '‚Äî'}`, m, y);
                    y += 5;
                });
            }
        }

        function genTech(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const m = 20;
            let y = 20;
            
            // Fondo oscuro
            doc.setFillColor(30, 30, 30);
            doc.rect(0, 0, pw, ph, 'F');
            
            // Header tech con verde ne√≥n
            doc.setFillColor(34, 197, 94);
            doc.rect(0, 0, pw, 3, 'F');
            
            // Foto cuadrada esquina superior derecha con borde verde
            if (d.photoSquare) {
                addPhotoSquare(doc, d.photoSquare, pw - m - 35, 15, 35, [34, 197, 94], 2);
            }
            
            doc.setTextColor(34, 197, 94);
            doc.setFontSize(28);
            doc.setFont('courier', 'bold');
            doc.text('> ' + d.personalInfo.fullName, m, 25);
            
            doc.setTextColor(34, 211, 238);
            doc.setFontSize(9);
            doc.setFont('courier', 'normal');
            const contact = [d.personalInfo.email, d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join(' | ');
            doc.text('$ ' + contact, m, 35);
            
            y = 50;
            
            // Resumen
            if (d.personalInfo.summary) {
                const maxWidth = d.photoSquare ? pw - 2*m - 40 : pw - 2*m;
                doc.setTextColor(156, 163, 175);
                doc.setFontSize(9);
                doc.setFont('courier', 'normal');
                doc.text('// About', m, y);
                y += 6;
                const lines = doc.splitTextToSize(d.personalInfo.summary, maxWidth);
                doc.text(lines, m, y);
                y += lines.length * 4 + 10;
            }
            
            // Experiencia con estilo c√≥digo
            if (d.experiences.length > 0) {
                if (y > ph - 40) { doc.addPage(); doc.setFillColor(30, 30, 30); doc.rect(0, 0, pw, ph, 'F'); y = 20; }
                doc.setTextColor(34, 197, 94);
                doc.setFontSize(12);
                doc.setFont('courier', 'bold');
                doc.text('function experience() {', m, y);
                y += 8;
                
                d.experiences.forEach((exp, idx) => {
                    if (y > ph - 50) { doc.addPage(); doc.setFillColor(30, 30, 30); doc.rect(0, 0, pw, ph, 'F'); y = 20; }
                    doc.setFontSize(10);
                    doc.setTextColor(251, 191, 36);
                    doc.text(`  [${idx + 1}]`, m + 5, y);
                    doc.setTextColor(255, 255, 255);
                    doc.text(`${exp.position || 'Position'}`, m + 15, y);
                    doc.setFontSize(8);
                    doc.setTextColor(156, 163, 175);
                    doc.text(`     ${exp.company || ''} | ${exp.period || ''}`, m + 5, y + 5);
                    y += 10;
                    if (exp.description) {
                        doc.setFontSize(8);
                        const lines = doc.splitTextToSize('     ' + exp.description, pw - 2*m);
                        doc.text(lines, m + 5, y);
                        y += lines.length * 3 + 2;
                    }
                });
                doc.setTextColor(34, 197, 94);
                doc.setFontSize(12);
                doc.text('}', m, y);
                y += 15;
            }
            
            // Educaci√≥n CON DETALLES
            if (d.education.length > 0) {
                if (y > ph - 40) { doc.addPage(); doc.setFillColor(30, 30, 30); doc.rect(0, 0, pw, ph, 'F'); y = 20; }
                doc.setTextColor(34, 197, 94);
                doc.setFontSize(12);
                doc.setFont('courier', 'bold');
                doc.text('const education = [', m, y);
                y += 8;
                
                d.education.forEach(edu => {
                    if (y > ph - 40) { doc.addPage(); doc.setFillColor(30, 30, 30); doc.rect(0, 0, pw, ph, 'F'); y = 20; }
                    doc.setFontSize(9);
                    doc.setTextColor(255, 255, 255);
                    doc.text(`  "${edu.degree || 'Degree'}"`, m + 5, y);
                    doc.setTextColor(156, 163, 175);
                    doc.text(`  // ${edu.institution || ''} - ${edu.year || ''}`, m + 5, y + 5);
                    y += 10;
                    if (edu.details) {
                        doc.setFontSize(8);
                        const lines = doc.splitTextToSize('  // ' + edu.details, pw - 2*m);
                        doc.text(lines, m + 5, y);
                        y += lines.length * 3 + 2;
                    }
                });
                doc.setTextColor(34, 197, 94);
                doc.text('];', m, y);
                y += 15;
            }
            
            // Habilidades
            if (d.skills.length > 0 && y < ph - 30) {
                if (y > ph - 40) { doc.addPage(); doc.setFillColor(30, 30, 30); doc.rect(0, 0, pw, ph, 'F'); y = 20; }
                doc.setTextColor(34, 197, 94);
                doc.setFontSize(12);
                doc.text('const skills = [', m, y);
                y += 7;
                doc.setFontSize(8);
                doc.setTextColor(251, 191, 36);
                const skillsText = d.skills.map(s => `"${s}"`).join(', ');
                const lines = doc.splitTextToSize('  ' + skillsText, pw - 2*m);
                doc.text(lines, m + 5, y);
                y += lines.length * 4 + 3;
                doc.setTextColor(34, 197, 94);
                doc.setFontSize(12);
                doc.text('];', m, y);
                y += 10;
            }
            
            // Idiomas
            if (d.languages.length > 0 && y < ph - 25) {
                doc.setTextColor(34, 197, 94);
                doc.setFontSize(12);
                doc.text('const languages = [', m, y);
                y += 7;
                doc.setFontSize(8);
                doc.setTextColor(251, 191, 36);
                d.languages.forEach(lang => {
                    if (y > ph - 10) return;
                    doc.text(`  "${lang.language}: ${lang.level || 'N/A'}"`, m + 5, y);
                    y += 4;
                });
                doc.setTextColor(34, 197, 94);
                doc.setFontSize(12);
                doc.text('];', m, y);
            }
        }

        function genCoral(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const m = 20;
            let y = 20;
            
            // Header coral con degradado naranja‚Üírosa
            for (let i = 0; i < 50; i++) {
                const ratio = i / 50;
                const r = 251 + (236 - 251) * ratio;
                const g = 146 + (72 - 146) * ratio;
                const b = 60 + (153 - 60) * ratio;
                doc.setFillColor(r, g, b);
                doc.rect(0, i, pw, 1, 'F');
            }
            
            // Foto rectangular con borde naranja
            if (d.photoRect) {
                addPhotoRect(doc, d.photoRect, pw - m - 25, 15, 25, 32, [251, 146, 60]);
            }
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(28);
            doc.setFont('helvetica', 'bold');
            doc.text(d.personalInfo.fullName, m, 28);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            const contact = [d.personalInfo.email, d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join(' ‚Ä¢ ');
            doc.text(contact, m, 40);
            
            y = 65;
            doc.setTextColor(0, 0, 0);
            
            // Resumen
            if (d.personalInfo.summary) {
                const maxWidth = d.photoRect ? pw - 2*m - 30 : pw - 2*m;
                doc.setFontSize(10);
                doc.setTextColor(60, 60, 60);
                const lines = doc.splitTextToSize(d.personalInfo.summary, maxWidth);
                doc.text(lines, m, y);
                y += lines.length * 5 + 12;
            }
            
            // Experiencia con barra lateral naranja
            if (d.experiences.length > 0) {
                if (y > ph - 40) { doc.addPage(); y = 20; }
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(251, 146, 60);
                doc.text('EXPERIENCIA', m, y);
                doc.setFillColor(251, 146, 60);
                doc.rect(m, y + 2, 50, 3, 'F');
                y += 12;
                
                d.experiences.forEach(exp => {
                    if (y > ph - 50) { doc.addPage(); y = 20; }
                    doc.setFillColor(251, 146, 60);
                    doc.circle(m + 3, y - 1, 2, 'F');
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(exp.position || 'Puesto', m + 8, y);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    doc.setTextColor(120, 120, 120);
                    doc.text(`${exp.company || ''} ‚Ä¢ ${exp.period || ''}`, m + 8, y + 5);
                    y += 11;
                    if (exp.description) {
                        doc.setFontSize(9);
                        doc.setTextColor(80, 80, 80);
                        const lines = doc.splitTextToSize(exp.description, pw - m - 15);
                        doc.text(lines, m + 8, y);
                        y += lines.length * 4 + 6;
                    }
                });
                y += 5;
            }
            
            // Educaci√≥n CON DETALLES
            if (d.education.length > 0) {
                if (y > ph - 40) { doc.addPage(); y = 20; }
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(236, 72, 153);
                doc.text('EDUCACI√ìN', m, y);
                doc.setFillColor(236, 72, 153);
                doc.rect(m, y + 2, 40, 3, 'F');
                y += 12;
                
                d.education.forEach(edu => {
                    if (y > ph - 40) { doc.addPage(); y = 20; }
                    doc.setFillColor(236, 72, 153);
                    doc.circle(m + 3, y - 1, 2, 'F');
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(edu.degree || 'T√≠tulo', m + 8, y);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    doc.setTextColor(120, 120, 120);
                    doc.text(`${edu.institution || ''} ‚Ä¢ ${edu.year || ''}`, m + 8, y + 5);
                    y += 11;
                    if (edu.details) {
                        doc.setFontSize(9);
                        doc.setTextColor(80, 80, 80);
                        const lines = doc.splitTextToSize(edu.details, pw - m - 15);
                        doc.text(lines, m + 8, y);
                        y += lines.length * 4 + 6;
                    }
                });
                y += 5;
            }
            
            // Habilidades
            if (d.skills.length > 0) {
                if (y > ph - 35) { doc.addPage(); y = 20; }
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(251, 191, 36);
                doc.text('HABILIDADES', m, y);
                y += 7;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(80, 80, 80);
                const skills = d.skills.join(' ‚Ä¢ ');
                const lines = doc.splitTextToSize(skills, pw - 2*m);
                doc.text(lines, m, y);
                y += lines.length * 4 + 10;
            }
            
            // Idiomas
            if (d.languages.length > 0 && y < ph - 25) {
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(251, 191, 36);
                doc.text('IDIOMAS', m, y);
                y += 7;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(80, 80, 80);
                d.languages.forEach(lang => {
                    doc.text(`${lang.language}: ${lang.level || '‚Äî'}`, m, y);
                    y += 5;
                });
            }
        }

        function genElegant(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const m = 25;
            let y = 25;
            
            // Header elegante azul oscuro
            doc.setFillColor(55, 48, 163);
            doc.rect(0, 0, pw, 50, 'F');
            
            // Detalles dorados
            doc.setFillColor(251, 191, 36);
            doc.rect(0, 48, pw, 2, 'F');
            
            // Foto rectangular con borde dorado
            if (d.photoRect) {
                addPhotoRect(doc, d.photoRect, pw - m - 25, 15, 25, 32, [251, 191, 36]);
            }
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(26);
            doc.setFont('times', 'bold');
            doc.text(d.personalInfo.fullName, m, 28);
            doc.setFontSize(10);
            doc.setFont('times', 'normal');
            const contact = [d.personalInfo.email, d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join(' ‚Ä¢ ');
            doc.text(contact, m, 40);
            
            y = 65;
            doc.setTextColor(0, 0, 0);
            
            // Resumen con serif
            if (d.personalInfo.summary) {
                const maxWidth = d.photoRect ? pw - 2*m - 30 : pw - 2*m;
                doc.setFontSize(10);
                doc.setFont('times', 'italic');
                doc.setTextColor(60, 60, 60);
                const lines = doc.splitTextToSize(d.personalInfo.summary, maxWidth);
                doc.text(lines, m, y);
                y += lines.length * 5 + 12;
            }
            
            // Experiencia con vi√±etas doradas
            if (d.experiences.length > 0) {
                if (y > ph - 40) { doc.addPage(); y = 20; }
                doc.setFontSize(13);
                doc.setFont('times', 'bold');
                doc.setTextColor(55, 48, 163);
                doc.text('EXPERIENCIA PROFESIONAL', m, y);
                doc.setDrawColor(251, 191, 36);
                doc.setLineWidth(1);
                doc.line(m, y + 2, m + 70, y + 2);
                y += 10;
                
                d.experiences.forEach(exp => {
                    if (y > ph - 50) { doc.addPage(); y = 20; }
                    doc.setFillColor(251, 191, 36);
                    doc.circle(m + 2, y - 1, 1.5, 'F');
                    doc.setFontSize(11);
                    doc.setFont('times', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(exp.position || 'Puesto', m + 7, y);
                    doc.setFont('times', 'italic');
                    doc.setFontSize(9);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${exp.company || ''} | ${exp.period || ''}`, m + 7, y + 5);
                    y += 11;
                    if (exp.description) {
                        doc.setFont('times', 'normal');
                        doc.setFontSize(9);
                        doc.setTextColor(60, 60, 60);
                        const lines = doc.splitTextToSize(exp.description, pw - m - 15);
                        doc.text(lines, m + 7, y);
                        y += lines.length * 4 + 6;
                    }
                });
                y += 5;
            }
            
            // Educaci√≥n CON DETALLES
            if (d.education.length > 0) {
                if (y > ph - 40) { doc.addPage(); y = 20; }
                doc.setFontSize(13);
                doc.setFont('times', 'bold');
                doc.setTextColor(55, 48, 163);
                doc.text('EDUCACI√ìN', m, y);
                doc.setDrawColor(251, 191, 36);
                doc.line(m, y + 2, m + 40, y + 2);
                y += 10;
                
                d.education.forEach(edu => {
                    if (y > ph - 40) { doc.addPage(); y = 20; }
                    doc.setFillColor(251, 191, 36);
                    doc.circle(m + 2, y - 1, 1.5, 'F');
                    doc.setFontSize(11);
                    doc.setFont('times', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(edu.degree || 'T√≠tulo', m + 7, y);
                    doc.setFont('times', 'italic');
                    doc.setFontSize(9);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${edu.institution || ''} | ${edu.year || ''}`, m + 7, y + 5);
                    y += 11;
                    if (edu.details) {
                        doc.setFont('times', 'normal');
                        doc.setFontSize(9);
                        doc.setTextColor(60, 60, 60);
                        const lines = doc.splitTextToSize(edu.details, pw - m - 15);
                        doc.text(lines, m + 7, y);
                        y += lines.length * 4 + 6;
                    }
                });
                y += 5;
            }
            
            // Habilidades
            if (d.skills.length > 0) {
                if (y > ph - 30) { doc.addPage(); y = 20; }
                doc.setFontSize(13);
                doc.setFont('times', 'bold');
                doc.setTextColor(55, 48, 163);
                doc.text('HABILIDADES', m, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('times', 'normal');
                doc.setTextColor(60, 60, 60);
                const skills = d.skills.join(' ‚Ä¢ ');
                const lines = doc.splitTextToSize(skills, pw - 2*m);
                doc.text(lines, m, y);
                y += lines.length * 4 + 10;
            }
            
            // Idiomas
            if (d.languages.length > 0 && y < ph - 25) {
                doc.setFontSize(13);
                doc.setFont('times', 'bold');
                doc.setTextColor(55, 48, 163);
                doc.text('IDIOMAS', m, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('times', 'normal');
                doc.setTextColor(60, 60, 60);
                d.languages.forEach(lang => {
                    doc.text(`${lang.language}: ${lang.level || '‚Äî'}`, m, y);
                    y += 5;
                });
            }
        }

        function genTimeline(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const m = 20;
            const lineX = 35;
            let y = 25;
            
            // Header
            doc.setFillColor(14, 165, 233);
            doc.rect(0, 0, pw, 45, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(26);
            doc.setFont('helvetica', 'bold');
            doc.text(d.personalInfo.fullName, m, 22);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            const contact = [d.personalInfo.email, d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join(' ‚Ä¢ ');
            doc.text(contact, m, 35);
            
            y = 60;
            doc.setTextColor(0, 0, 0);
            
            // Resumen
            if (d.personalInfo.summary) {
                doc.setFontSize(10);
                doc.setTextColor(60, 60, 60);
                const lines = doc.splitTextToSize(d.personalInfo.summary, pw - 2*m);
                doc.text(lines, m, y);
                y += lines.length * 5 + 15;
            }
            
            // Experiencia con timeline
            if (d.experiences.length > 0) {
                if (y > ph - 40) { doc.addPage(); y = 20; }
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(14, 165, 233);
                doc.text('EXPERIENCIA', m, y);
                y += 12;
                
                d.experiences.forEach((exp, idx) => {
                    if (y > ph - 60) { doc.addPage(); y = 20; }
                    
                    // L√≠nea vertical
                    const lineStart = y - 5;
                    const lineEnd = y + 20;
                    doc.setDrawColor(14, 165, 233);
                    doc.setLineWidth(2);
                    doc.line(lineX, lineStart, lineX, lineEnd);
                    
                    // C√≠rculo en la l√≠nea
                    doc.setFillColor(14, 165, 233);
                    doc.circle(lineX, y, 3, 'F');
                    
                    // Contenido
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(exp.position || 'Puesto', lineX + 8, y);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${exp.company || ''} | ${exp.period || ''}`, lineX + 8, y + 5);
                    y += 11;
                    if (exp.description) {
                        doc.setFontSize(9);
                        doc.setTextColor(60, 60, 60);
                        const lines = doc.splitTextToSize(exp.description, pw - lineX - 15);
                        doc.text(lines, lineX + 8, y);
                        y += lines.length * 4 + 8;
                    } else {
                        y += 5;
                    }
                });
                y += 10;
            }
            
            // Educaci√≥n con timeline
            if (d.education.length > 0) {
                if (y > ph - 40) { doc.addPage(); y = 20; }
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(14, 165, 233);
                doc.text('EDUCACI√ìN', m, y);
                y += 12;
                
                d.education.forEach(edu => {
                    if (y > ph - 50) { doc.addPage(); y = 20; }
                    
                    const lineStart = y - 5;
                    const lineEnd = y + 15;
                    doc.setDrawColor(14, 165, 233);
                    doc.setLineWidth(2);
                    doc.line(lineX, lineStart, lineX, lineEnd);
                    
                    doc.setFillColor(14, 165, 233);
                    doc.circle(lineX, y, 3, 'F');
                    
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(edu.degree || 'T√≠tulo', lineX + 8, y);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${edu.institution || ''} | ${edu.year || ''}`, lineX + 8, y + 5);
                    y += 15;
                });
                y += 10;
            }
            
            // Habilidades e Idiomas
            if (d.skills.length > 0) {
                if (y > ph - 30) { doc.addPage(); y = 20; }
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(14, 165, 233);
                doc.text('HABILIDADES', m, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(60, 60, 60);
                const skills = d.skills.join(' ‚Ä¢ ');
                const lines = doc.splitTextToSize(skills, pw - 2*m);
                doc.text(lines, m, y);
                y += lines.length * 4 + 10;
            }
            
            if (d.languages.length > 0 && y < ph - 25) {
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(14, 165, 233);
                doc.text('IDIOMAS', m, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(60, 60, 60);
                d.languages.forEach(lang => {
                    doc.text(`${lang.language}: ${lang.level || '‚Äî'}`, m, y);
                    y += 5;
                });
            }
        }

        function genRightBar(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const sw = 65;
            const sidebarX = pw - sw;
            const m = 20;
            
            // Sidebar derecho rosa
            doc.setFillColor(225, 29, 72);
            doc.rect(sidebarX, 0, sw, ph, 'F');
            
            // Header
            doc.setFillColor(225, 29, 72);
            doc.rect(0, 0, sidebarX, 45, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(24);
            doc.setFont('helvetica', 'bold');
            doc.text(d.personalInfo.fullName, m, 22);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.text(d.personalInfo.email || '', m, 31);
            doc.text([d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join(' | '), m, 38);
            
            // Sidebar - Habilidades
            let sy = 55;
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('HABILIDADES', sidebarX + 8, sy);
            sy += 10;
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            d.skills.forEach(skill => {
                if (sy > ph - 20) return;
                const lines = doc.splitTextToSize(skill, sw - 16);
                doc.text(lines, sidebarX + 8, sy);
                sy += lines.length * 4 + 4;
            });
            
            // Sidebar - Idiomas
            sy += 10;
            if (sy < ph - 40) {
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.text('IDIOMAS', sidebarX + 8, sy);
                sy += 10;
                doc.setFontSize(8);
                doc.setFont('helvetica', 'normal');
                d.languages.forEach(lang => {
                    if (sy > ph - 10) return;
                    doc.text(lang.language, sidebarX + 8, sy);
                    doc.setFontSize(7);
                    doc.text(lang.level || '‚Äî', sidebarX + 8, sy + 3);
                    sy += 11;
                    doc.setFontSize(8);
                });
            }
            
            // Contenido principal (izquierda)
            let my = 55;
            doc.setTextColor(0, 0, 0);
            
            if (d.personalInfo.summary) {
                doc.setFontSize(10);
                doc.setTextColor(60, 60, 60);
                const lines = doc.splitTextToSize(d.personalInfo.summary, sidebarX - m - 10);
                doc.text(lines, m, my);
                my += lines.length * 5 + 12;
            }
            
            // Experiencia
            if (d.experiences.length > 0) {
                if (my > ph - 40) { doc.addPage(); my = 20; }
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(225, 29, 72);
                doc.text('EXPERIENCIA', m, my);
                my += 10;
                
                d.experiences.forEach(exp => {
                    if (my > ph - 50) { doc.addPage(); my = 20; }
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(exp.position || 'Puesto', m, my);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${exp.company || ''} | ${exp.period || ''}`, m, my + 5);
                    my += 13;
                });
            }
            
            // Educaci√≥n
            if (d.education.length > 0) {
                my += 5;
                if (my > ph - 40) { doc.addPage(); my = 20; }
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(225, 29, 72);
                doc.text('EDUCACI√ìN', m, my);
                my += 10;
                
                d.education.forEach(edu => {
                    if (my > ph - 40) { doc.addPage(); my = 20; }
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(edu.degree || 'T√≠tulo', m, my);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${edu.institution || ''} | ${edu.year || ''}`, m, my + 5);
                    my += 13;
                });
            }
        }

        function genBlocks(doc, d) {
            const pw = doc.internal.pageSize.getWidth();
            const ph = doc.internal.pageSize.getHeight();
            const m = 20;
            let y = 20;
            
            // Header con bloques de color
            const blockW = pw / 3;
            doc.setFillColor(20, 184, 166); // Teal
            doc.rect(0, 0, blockW, 15, 'F');
            doc.setFillColor(250, 204, 21); // Amarillo
            doc.rect(blockW, 0, blockW, 15, 'F');
            doc.setFillColor(168, 85, 247); // P√∫rpura
            doc.rect(blockW * 2, 0, blockW, 15, 'F');
            
            // Nombre
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(28);
            doc.setFont('helvetica', 'bold');
            doc.text(d.personalInfo.fullName, m, 35);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(100, 100, 100);
            const contact = [d.personalInfo.email, d.personalInfo.phone, d.personalInfo.location].filter(Boolean).join(' ‚Ä¢ ');
            doc.text(contact, m, 45);
            
            y = 60;
            
            // Resumen
            if (d.personalInfo.summary) {
                doc.setFontSize(10);
                doc.setTextColor(60, 60, 60);
                const lines = doc.splitTextToSize(d.personalInfo.summary, pw - 2*m);
                doc.text(lines, m, y);
                y += lines.length * 5 + 12;
            }
            
            // Experiencia con bloque teal
            if (d.experiences.length > 0) {
                if (y > ph - 40) { doc.addPage(); y = 20; }
                
                // Bloque de color
                doc.setFillColor(20, 184, 166);
                doc.rect(m - 5, y - 8, 5, 12, 'F');
                
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(20, 184, 166);
                doc.text('EXPERIENCIA', m + 3, y);
                y += 10;
                
                d.experiences.forEach(exp => {
                    if (y > ph - 50) { doc.addPage(); y = 20; }
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(exp.position || 'Puesto', m + 3, y);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${exp.company || ''} | ${exp.period || ''}`, m + 3, y + 5);
                    y += 11;
                    if (exp.description) {
                        doc.setFontSize(9);
                        doc.setTextColor(60, 60, 60);
                        const lines = doc.splitTextToSize(exp.description, pw - m - 10);
                        doc.text(lines, m + 3, y);
                        y += lines.length * 4 + 6;
                    }
                });
                y += 5;
            }
            
            // Educaci√≥n con bloque p√∫rpura
            if (d.education.length > 0) {
                if (y > ph - 40) { doc.addPage(); y = 20; }
                
                doc.setFillColor(168, 85, 247);
                doc.rect(m - 5, y - 8, 5, 12, 'F');
                
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(168, 85, 247);
                doc.text('EDUCACI√ìN', m + 3, y);
                y += 10;
                
                d.education.forEach(edu => {
                    if (y > ph - 40) { doc.addPage(); y = 20; }
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text(edu.degree || 'T√≠tulo', m + 3, y);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(9);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${edu.institution || ''} | ${edu.year || ''}`, m + 3, y + 5);
                    y += 13;
                });
                y += 5;
            }
            
            // Habilidades con bloque amarillo
            if (d.skills.length > 0) {
                if (y > ph - 30) { doc.addPage(); y = 20; }
                
                doc.setFillColor(250, 204, 21);
                doc.rect(m - 5, y - 8, 5, 12, 'F');
                
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(202, 138, 4);
                doc.text('HABILIDADES', m + 3, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(60, 60, 60);
                const skills = d.skills.join(' ‚Ä¢ ');
                const lines = doc.splitTextToSize(skills, pw - m - 10);
                doc.text(lines, m + 3, y);
                y += lines.length * 4 + 10;
            }
            
            // Idiomas
            if (d.languages.length > 0 && y < ph - 25) {
                doc.setFillColor(20, 184, 166);
                doc.rect(m - 5, y - 8, 5, 12, 'F');
                
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(20, 184, 166);
                doc.text('IDIOMAS', m + 3, y);
                y += 8;
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(60, 60, 60);
                d.languages.forEach(lang => {
                    doc.text(`${lang.language}: ${lang.level || '‚Äî'}`, m + 3, y);
                    y += 5;
                });
            }
        }
    </script>

</body>
</html>